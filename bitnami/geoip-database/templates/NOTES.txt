{{- /*
Copyright Simon Li. All Rights Reserved.
SPDX-License-Identifier: APACHE-2.0
*/}}

GeoIP Database deployed successfully.

PVC: {{ include "geoip-database.pvcName" . }}
{{- if .Values.update.enabled }}
Schedule: {{ .Values.update.schedule }}
{{- end }}
{{- if .Values.hashConfigMap.enabled }}
Hash ConfigMap: {{ include "geoip-database.hashConfigMapName" . }}
{{- end }}

Mount in your pods:

  volumes:
    - name: geoip-data
      persistentVolumeClaim:
        claimName: {{ include "geoip-database.pvcName" . }}
  volumeMounts:
    - name: geoip-data
      mountPath: {{ .Values.databases.directory }}
      readOnly: true

{{- if .Values.hashConfigMap.enabled }}

To detect database updates, watch the ConfigMap hash and trigger rolling updates as needed.
{{- end }}
